(function(a,k){var f=window.kendo,d=a.extend;if(f===k){return}d(true,f.data,{schemas:{everlive:{type:"json",data:function(l){return l.Result||l},total:"Count"}},transports:{everlive:{read:{dataType:"json",type:"GET",cache:false},update:{dataType:"json",contentType:"application/json",type:"PUT",cache:false},create:{dataType:"json",contentType:"application/json",type:"POST",cache:false},destroy:{dataType:"json",type:"DELETE",cache:false},parameterMap:function(l,m){if(m==="destroy"){return{}}if(m==="create"||m==="update"){return JSON.stringify(l)}if(m==="read"){return null}}}}});function j(l){var n={};if(l){if(l.skip){n.$skip=l.skip;delete l.skip}if(l.take){n.$take=l.take;delete l.take}if(l.sort){var p=l.sort;var o={};if(!a.isArray(p)){p=[p]}a.each(p,function(q,r){o[r.field]=r.dir==="asc"?1:-1});n.$sort=o;delete l.sort}if(l.filter){var m=new e().build(l.filter);n.$where=m;delete l.filter}}return n}var h=["startsWith","endsWith","contains"];function e(){}e.prototype={build:function(l){return this._build(l)},_build:function(l){if(this._isRaw(l)){return this._raw(l)}else{if(this._isSimple(l)){return this._simple(l)}else{if(this._isRegex(l)){return this._regex(l)}else{if(this._isAnd(l)){return this._and(l)}else{if(this._isOr(l)){return this._or(l)}}}}}},_isRaw:function(l){return l.operator==="_raw"},_raw:function(m){var l={};l[m.field]=m.value;return l},_isSimple:function(l){return typeof l.logic==="undefined"&&!this._isRegex(l)},_simple:function(m){var o={},l={};var n=this._translateoperator(m.operator);if(n){o[n]=m.value}else{o=m.value}l[m.field]=o;return l},_isRegex:function(l){return a.inArray(l.operator,h)!==-1},_regex:function(m){var l={};var n=this._getRegex(m);var o=this._getRegexValue(n);l[m.field]=o;return l},_getRegex:function(l){var m=l.value;switch(l.operator){case"contains":return new RegExp(".*"+m+".*","i");case"startsWith":return new RegExp(m+".*","i");case"endsWith":return new RegExp(".*"+m,"i")}throw new Error("Unknown operator type.")},_getRegexValue:function(l){return Everlive.QueryBuilder.prototype._getRegexValue.call(this,l)},_isAnd:function(l){return l.logic==="and"},_and:function(m){var n,o,r,q={};var p=m.filters;for(n=0,o=p.length;n<o;n++){r=this._build(p[n]);q=this._andAppend(q,r)}return q},_andAppend:function(l,m){return Everlive.QueryBuilder.prototype._andAppend.call(this,l,m)},_isOr:function(l){return l.logic==="or"},_or:function(m){var n,o,r,q=[];var p=m.filters;for(n=0,o=p.length;n<o;n++){r=this._build(p[n]);q.push(r)}return{$or:q}},_translateoperator:function(l){switch(l){case"eq":return null;case"neq":return"$ne";case"gt":return"$gt";case"lt":return"$lt";case"gte":return"$gte";case"lte":return"$lte"}throw new Error("Unknown operator type.")}};function b(l){return new Everlive.Query(l.$where,null,l.$sort,l.$skip,l.$take)}var i=f.data.RemoteTransport.prototype.setup;f.data.RemoteTransport.prototype.setup=function(m,o){if(!m.url&&!this.options[o].url&&this.options.typeName){m.url=Everlive.Request.prototype.buildUrl(Everlive.$.setup)+this.options.typeName;if(o==="update"||o==="destroy"){m.url+="/"+m.data[Everlive.idField]}}m.headers=Everlive.Request.prototype.buildAuthHeader(Everlive.$.setup);if(o==="read"&&m.data){var n=j(m.data);var l=b(n);m.headers=a.extend(m.headers,Everlive.Request.prototype.buildQueryHeaders(l))}return i.call(this,m,o)};var c=[Everlive.idField,"CreatedAt"];var g=f.data.Model.prototype.accept;f.data.Model.prototype.accept=function(l){var n=this,m,o;if(l&&n.isNew()&&l[Everlive.idField]){for(m in n.fields){if(a.inArray(m,c)===-1){o=n.get(m);l[m]=o}}}g.call(this,l)}})(jQuery);